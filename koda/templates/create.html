{% extends "base.html" %}

{% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/create.css') }}">
{% endblock %}

{% block content %}

    <div class="form-selection">
        <form method="post" enctype="multipart/form-data">
            <div class="content-select">
                <h1 class="no-select">Build Your Event!</h1>
                <input type="text" class="event-title" name="title">
                <textarea class="container" maxlength="250" name="description"></textarea>
                <div class="char-counter no-select">
                    <span id="char-count">0</span>/250
                </div>
                <button type="submit" class="build-button">Start Your Event Now</button>
            </div>
            <div class="image-select">
                <img id="event-image" class="container" src="{{ url_for('static', filename='icons/image_upload_default.png') }}" alt="event-image">
                <div class="upload-icon">
                    <label for="file-input" class="photo-upload" id="file-cover"><img src="{{ url_for('static', filename='icons/image_upload_icon.png') }}"></label>
                    <input type="file" id="file-input" accept="image/*" name="photo">
                </div>
            </div>
        </form>
    </div>

{% endblock %}

{% block scripts %}
    <script>

        let eventPhoto = document.getElementById("event-image");
        let inputFile = document.getElementById("file-input")

        inputFile.onchange = function () {
            eventPhoto.src = URL.createObjectURL(inputFile.files[0]);
        }

        document.addEventListener('DOMContentLoaded', function () {
            const textarea = document.querySelector('.event-description');
            const char_count = document.getElementById('char-count');

            textarea.addEventListener('input', function() {
                char_count.textContent = textarea.value.length;
                if (textarea.value.length > 200){
                    char_count.style.color = "#ff5470";
                    char_count.style.textShadow = "0px 0px 2px rgba(0,0,0,0.25)"
                } else {
                    char_count.style.color = "black";
                };
            })

        })
    </script>
{% endblock %}